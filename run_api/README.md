# Запуск API сервиса

Эта директория содержит скрипты для запуска только API сервиса с базой данных для целей разработки.

## Требования

- Установленный Docker и Docker Compose
- Git (для клонирования репозитория)

## Доступные скрипты

### Для Windows:
- `run_api.ps1` (PowerShell)
- `run_api.bat` (Command Prompt)

### Для macOS/Linux:
- `run_api.sh` (Bash)

## Как использовать

1. Перейдите в корневую директорию проекта
2. Запустите соответствующий скрипт для вашей операционной системы:

### Windows (PowerShell):
```powershell
.\run_api\run_api.ps1
```

### Windows (Command Prompt):
```cmd
run_api\run_api.bat
```

### macOS/Linux:
```bash
./run_api/run_api.sh
```

## Доступ к API

После запуска API будет доступен по следующим адресам:
- Документация API (Swagger UI): http://localhost:8020/docs
- Базовый URL API: http://localhost:8020
- База данных: localhost:5432

## Остановка сервиса

Для остановки сервиса нажмите `Ctrl+C` в терминале, где запущен скрипт.

## Устранение неполадок

Если возникли проблемы:

1. Убедитесь, что Docker запущен
2. Проверьте, свободны ли порты 8020 и 5432
3. Попробуйте остановить существующие контейнеры:
   ```bash
   docker-compose down
   ```
4. Проверьте логи Docker:
   ```bash
   docker-compose logs api
   ```

## Примечания

- Скрипты автоматически создают временный docker-compose файл только для API и базы данных
- При завершении работы скрипта все ресурсы корректно очищаются
- База данных использует постоянное хранилище, поэтому данные сохраняются между перезапусками
- Для полной очистки данных базы данных можно использовать команду:
  ```bash
  docker volume rm udms-d_postgres_data
  ``` 